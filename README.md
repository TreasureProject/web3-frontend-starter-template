# Web3 Frontend Starter Template

This is an opiniated web3 frontend starter template from TreasureDAO.

## Tech Stack

- [Remix](https://remix.run/doc)
- Tailwind CSS
- GraphQL Codegen
- wagmi
- react-hot-toast
- Cloudflare Pages (Deployment platform)

## Development

You will be utilizing Wrangler for local development to emulate the Cloudflare runtime. This is already wired up in your package.json as the `dev` script:

```sh
# generate tailwind css directory
npm run generate:css
# start the remix dev server and wrangler
npm run dev
```

Open up [http://127.0.0.1:8788](http://127.0.0.1:8788) and you should be ready to go!

### Working with graphQL

If you are fetching data from an external GraphQL endpoint, first add your endpoint in `.env`.

Write your query inside `app.queries.ts`. Theres an example in there. When you're done, run `npm run codegen`. Your autogenerated code will appear under the same file, `/graphql`

Then create a file called `api.server.ts` under utils. Naming it with a `server` prefix will tell Remix to not bundle that file in client JavaScript.

Something like this:

```tsx
import { GraphQLClient } from "graphql-request";

import { getSdk as getExchangeSdk } from "~/graphql/exchange.generated";

// Passing URL here, since you'd want to have different endpoints depending on production or not
export const exchangeSdk = (url: string) =>
  getExchangeSdk(new GraphQLClient(url, { fetch }));
```

Now you can use this in your loaders, where it will fetch from that endpoint and server side render your app.

ex.

```ts
import { getEnvVariable } from "~/utils/env";
import { exchangeSdk } from "~/utils.api.server";

export const loader: LoaderFunction = async ({ request, context }) => {
  const exchangeUrl = getEnvVariable("EXCHANGE_ENDPOINT", context);

  const sdk = exchangeSdk(url);

  return json<LoaderData>({
    data: await sdk.hello(),
  });
};

// then use it client like this:
export default function Index() {
  const data = useLoaderData<LoaderData>();

  return <div>{data.hello}</div>;
}
```

## Deployment

Cloudflare Pages are currently only deployable through their Git provider integrations.

If you don't already have an account, then [create a Cloudflare account here](https://dash.cloudflare.com/sign-up/pages) and after verifying your email address with Cloudflare, go to your dashboard and follow the [Cloudflare Pages deployment guide](https://developers.cloudflare.com/pages/framework-guides/deploy-anything).

Configure the "Build command" should be set to `npm run build`, and the "Build output directory" should be set to `public`.
